---
Test
---
!1 !c Testscript SELECT QUERY and Count Records
----

!*> '''Setup'''
!define TEST_SYSTEM {slim} 
!path ../fitnesse/java_workspace/fixtures
!path ../fitnesse/sqldeveloper/jdbc/lib/ojdbc6.jar
!path ../fitnesse/java_workspace/fixtures/generic/fixtures/PowerCenterWS
!path ../fitnesse/ms/sqljdbc4.jar

|import                       |
|generic.fixtures.Global      |
|generic.fixtures.PWCFixture  |
|generic.fixtures.LinuxFixture|
|generic.fixtures.DBFixture   |
*!
!*> '''Variables'''
!define MUT_TYDSTP {!today (ddMMMyy) -1} variable used to set the date/time for EDO_MODIFICATONS
!define LAST_MUTATION_DATE {!today (ddMMMyy) -1} date of last successfull processing of EDO MODIFICATION in HHB
!define HHB_USERS {300700001, 300700002, 300700003, 300700004,300700005, 300700006, 300700007, 300700008,300700009} set of HHB users
!define EDO_COPY_OVK_ID {300700001, 300700002, 300700003, 300700004, 300700005, 300700006, 300700007, 300700009, 300700010 } set of EDO's registered in RT system
!define EDO_MOD_OVK_ID {300700001, 300700002, 300700003, 300700004, 300700005, 300700006, 300700007, 300700009, 300700010} set of EDO's with modifications
!define CURRENTDAY {!today (ddMMMyy)}
!define YESTERDAY {!today (ddMMMyy) -1} 
!define CURRENTDAY_MIN_LESS_THAN_7 {!today (ddMMMyy) -3}
!define CURRENTDAY_MIN_7 {!today (ddMMMyy) -7} 
!define CURRENTDAY_MIN_MORE_THAN_7 {!today (ddMMMyy) -9}
*!

!2 Count record tests
!3 Number of records in Siebel modified in a specific date range should be in EB2 staging tables
You can set the date format so it matches the format you use in your string in the filter
|Check Number of Records |hallo_mijn_testcase|
|date format|Source databaseName|Source Table|Source Filter                    |Target databaseName|Target Table  |Target Filter|source number of records?|target number of records?|same number of records?|get log filename?|
|yyyyMMdd   |HHB|HHB_USER||FIGLO|dbo.CashFlowBankAccount|balancedate> FITCONVERTDT(20130712)        |                         |                         |Yes                    ||

|table:select query                                                             |hhbquestion|
|database name|HHB                                                              |
|sql statement|SELECT COUNT(*) AS AANTAL FROM HHB_PROCESS_STATUS HPS WHERE 1 = 0|
|nr cols ok   |AANTAL                                                           |
|1            |0                                                                |

|table:select query                                                                 |
|database name|HHB                                                                  |
|sql statement|SELECT COUNT(*) AS AANTAL FROM HHB_PROCESS_STATUS HPS WHERE 1 !-<-! 0|
|nr cols ok   |AANTAL                                                               |
|1            |0                                                                    |

|table:select query                                                                                                                                                                                                      |
|database name|FIGLO                                                                                                                                                                                                     |
|sql statement|select count(*) as AANTAL from dbo.Budget where 1 = 1 |
|nr cols ok   |AANTAL                                                                                                                                                                                                    |
|1            |41                                                                                                                                                                                                         |

|table:select query                                                                 |
|database name|HHB                                                                  |
|sql statement|SELECT COUNT(*) AS TOTAL FROM (SELECT * FROM HHB_USER_S MINUS SELECT * FROM HHB_USER_S)|
|nr cols ok   |AANTAL                                                                                                                                                                                                    |
|1            |0                                                                                                                                                                                                         |
