---
Help: Fixture to create a temporary table based on a database query
Test
---
!3 Purpose
The fixture should create a database table based on a query the tester supplies. The data can then be used by any other test page.
The counterpart of this fixture is the ..FrontPage.ExamplesJac.TestJac.UnderConstruction.DropTable fixture, which drops the specified table.

!3 Limitations
By design, the create table will only accept an indication for the table. All table names will be prefixed.

!*> imports
!define TEST_SYSTEM {slim}
!path ./java_workspace/fixtures/consag/fixtures
'''DB fixtures'''
!path ../fitnesse/ibm/db2jcc_license_cisuz.jar
!path ../fitnesse/ibm/db2jcc.jar
!path ../fitnesse/netezza/nzjdbc.jar
!path ../fitnesse/hpnonstop/t4sqlmx.jar
!path ../fitnesse/ms/sqljdbc4.jar
!path ../fitnesse/sqldeveloper/jdbc/lib/ojdbc6.jar


|import     |
|supporting |
|database   |
|powercenter|

*!

!define demotab {S_LST_OF_VAL_CPY}
!define dbconn1 {SDQ_DATA}
!define dbconn2 {SDQ_DATA4}

|script|create table  |crttab                                                                                                                |
|ensure|table         |${demotab}|exists in database|${dbconn1}|using|SELECT '${demotab}' as table_name, count(*) nr_records FROM ${demotab}|
|show  |table name for|${demotab}                                                                                                          |
|check |error message |No errors                                                                                                             |
|ensure|table         |${demotab}|exists                                                                                                   |

|script|table privileges|privtab                                                               |
|ensure|user            |${dbconn2}|has privilege|SELECT|on object|${demotab}|in|${dbconn1}|
|check |error message   |No errors                                                             |

|script|create synonym|crtsyn                                                                            |
|ensure|synonym       |${demotab}|exists in database|${dbconn2}|for object|${demotab}|in|${dbconn1}|
|check |error message |No errors                                                                         |


!lastmodified