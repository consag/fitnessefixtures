!define TEST_SYSTEM {slim} 
!path ../fitnesse/java_workspace/fixtures
!path ../fitnesse/sqldeveloper/jdbc/lib/ojdbc6.jar
!path /u01/app/ibm/db2c/db2inst/sqllib/java/db2jcc_license_cisuz.jar
!path ../fitnesse/ibm

|import                       |
|generic.fixtures.Global      |
|generic.fixtures.PWCFixture  |
|generic.fixtures.LinuxFixture|
|generic.fixtures.DBFixture   |
|generic.fixtures.DACFixture  |

!2 Checks before you run an execution plan
Run the following checks before you execute an execution plan. For example, right after a deployment.

!3 How many tasks are defined in the execution plan?
This checks the number of tasks in an execution plan. It can be used before running an execution plan.
It checks the number of DEFINED tasks. This may be different from the number of tasks executed during a run. See further below on how that number can be verified.

|script|Check Exec Plan        |EB2|RB CRM User|
|check |number of tasks defined|6              |


!2 Run your execution plan - Incremental
!3 Start the execution plan

|Run Exec Plan                                                                  |
|Env|exec Plan Name|run mode   |date format |refresh date|start Plan successful?|
|EB2|RB CRM User   |Incremental|DD Mon, YYYY|!today      |Success               |

!3 Wait on the completion of the execution plan
As soon as you see this and are waiting, why not open another browser window/tab and monitor the progress using the Monitor fixture?
Check the example on http://oesv7022.rabobank.nl:9010/TestJac.ExampleDacRunMonitor

|Run Exec Plan|example_crm_user_wait_incremental                      |
|Env          |exec Plan Name|Stop on Errors|Result?|get log filename?|
|EB2          |RB CRM User   |Yes           |Success|                 |


!2 Check the execution plan results
The following tests can be defined to verify the outcome of the execution plan and its tasks.

!3 Check the amount of records processed
For each task you can request the number of records processed.

|script|Check Exec Plan               |EB2                           |RB CRM User      |LATEST|
|check |total number of executed tasks|6                                                      |
|check |failed tasks                  |0                                                      |
|check |successful tasks              |6                                                      |
|check |task or task detail           |Change Capture For Siebel OLTP|number of records|0|
|check |task                          |RB Extract for User           |number of records|0|
|check |task                          |RB Push User                  |number of records|2|
|check |task                          |RB_SDE_User_LoadDeletedRows   |number of records|0     |
